
{% extends 'article.html' %}

{% set stylesheet = 'pages/projections.css' %}

{% block article_body %}
<div class="overview o-grid-row" data-o-grid-colspan="6">
  <p>Using data from a team of academics this page shows a projected election result for the country as a whole and for individual constituencies in key battlegrounds.</p>
</div>
<div class="overview o-grid-row" data-o-grid-colspan="6">
  {% set table_data = overview %}
  {% include "./result-table.html" %}
</div>
<div class="overview o-grid-row" data-o-grid-colspan="6">
</div>
</div>
  <div class="figure o-grid-row" data-o-grid-colspan="12">

    <nav class="battle-nav figure__body o-grid-row">
      <p class="figure__subtitle" data-o-grid-colspan="12 M3 L3">As the UK&rsquo;s two-party system fragments, four distinct types of contest will decide control of Parliament on May 7.</p>
      <a href="#snp" class="battle-nav__item fauxlink" data-o-grid-colspan="12 M2">
        <span class="battle-nav__logo">
          <img class="snp" src="//www.ft.com/ig/static/sites/2014/ge15/snp.png" alt="">
        </span>
        <span class="fauxlink__target">SNP target&nbsp;seats</span>
      </a>
      <a href="#marginals" class="battle-nav__item fauxlink" data-o-grid-colspan="12 M2">
        <span class="battle-nav__logo">
          <img class="labcon" src="//www.ft.com/ig/static/sites/2014/ge15/lab_con.png" alt="">
        </span>
        <span class="fauxlink__target">Lab-Con marginals</span>
      </a>
      <a href="#ukip" class="battle-nav__item fauxlink" data-o-grid-colspan="12 M2">
        <span class="battle-nav__logo">
          <img class="ukip" src="//www.ft.com/ig/static/sites/2014/ge15/ukip.png" alt="">
        </span>
        <span class="fauxlink__target">Ukip target&nbsp;seats</span>
      </a>
      <a href="#libdem" class="battle-nav__item fauxlink" data-o-grid-colspan="12 M2">
        <span class="battle-nav__logo">
          <img class="libdem" src="//www.ft.com/ig/static/sites/2014/ge15/libdem.png" alt="">
        </span>
        <span class="fauxlink__target">Lib&nbsp;Dem seats at&nbsp;risk</span>
      </a>
    </nav>
  </div>

  <div id="slope-groups" class="o-grid-row" style="min-height:800px;">
    {% for group in groups %}
      <div class="figure constituency-group constituency-group--slope o-grid-row" data-o-grid-colspan="12">
        <h2 class="article-body__subhead figure__title">{{ group.headline }}</h2>
        <div class="o-grid-row" data-o-grid-colspan="12"><p>{{ group.description }}</p></div>
        <div class="figure__body o-grid-row">
          <div data-o-grid-colspan="12 S4 M3 L3">
            <div class="o-grid-row constituency-group__details">

              <div class="constituency-group__summary-table" data-o-grid-colspan="12 M10 L8">
                {% set table_data = group.partychanges %}
                {% include "./result-summary-table.html" %}
              </div>
              <div class="constituency-group__locator-map" data-o-grid-colspan="hide M10 L8">
                <div class="constituency-group__locator-map-ratio" data-group="{{loop.index0}}"></div>
              </div>
            </div>
          </div>
          <div data-o-grid-colspan="12 S8 M9 L9">
            <div class="o-grid-row" >
              {% for constituency in group.constituencies | sortBy('name') %}
              <div class="constituency-group__slope" data-o-grid-colspan="4 M3 L1 XL1">
                <div class="constituency-group__slope-graphic" data-constituency="{{constituency.id}}" data-order="{{loop.index0}}"></div>
                <div class="constituency-group__constituency-name">{{constituency.name}}</div>
                </div>
                {% endfor %}
            </div>
          </div>
        </div>
      </div>
    {% endfor %}

  </div>
<div>
  <p>Data source <a href="http://www.electionforecast.co.uk">electionforecast.co.uk</a></p>
</div>
{% endblock %}

{% block scripts %}
<script>
{% autoescape false %}
var battlegrounds = {{ groups | json }};
{% endautoescape %}
if (cutsTheMustard) {
  addScript('{{ asset("js/group-forecast-slopes.js") }}', false, false);
}
</script>
{% endblock %}
