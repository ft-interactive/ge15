
{% extends 'article.html' %}

{% set stylesheet = 'pages/projections.css' %}

{% set view.article = {center: true} %}
{% set table_data = overview %}

{% block article_body %}

  {% include "./result-table.html" %}

  <div class="o-grid-row article-body__copy">

<p>Using the latest data from <a href="http://electionforecast.co.uk">ElectionForecast.co.uk</a>, a team of researchers using polling data to forecast the May 7 general election, this graphic shows the likely national outcome.</p>

<p>With the UK&rsquo;s traditional two-party system fragmenting, this election outcome will be determined in four different types of local battle.</p>

<p>Each constituency&rsquo;s miniature chart compares the result of 2010 general election (or any subsequent by-election) to the current <a href="http://www.electionforecast.co.uk/tables/predicted_vote_by_seat.html">constituency-level projection</a> from ElectionForecast.co.uk.</p>

</div>

  <nav class="battle-nav o-grid-row" data-o-grid-colspan="12">
    <a href="#scotland" class="battle-nav__item fauxlink">
      <span class="battle-nav__logo">
        <img class="snp" src="//www.ft.com/ig/static/sites/2014/ge15/snp.png" alt="">
      </span>
      <span class="fauxlink__target">SNP target&nbsp;seats</span>
    </a>
    <a href="#marginals" class="battle-nav__item fauxlink">
      <span class="battle-nav__logo">
        <img class="labcon" src="//www.ft.com/ig/static/sites/2014/ge15/lab_con.png" alt="">
      </span>
      <span class="fauxlink__target">Lab-Con marginals</span>
    </a>
    <a href="#ukip" class="battle-nav__item fauxlink">
      <span class="battle-nav__logo">
        <img class="ukip" src="//www.ft.com/ig/static/sites/2014/ge15/ukip.png" alt="">
      </span>
      <span class="fauxlink__target">Ukip target&nbsp;seats</span>
    </a>
    <a href="#libdem" class="battle-nav__item fauxlink">
      <span class="battle-nav__logo">
        <img class="libdem" src="//www.ft.com/ig/static/sites/2014/ge15/libdem.png" alt="">
      </span>
      <span class="fauxlink__target">Lib&nbsp;Dem seats at&nbsp;risk</span>
    </a>
  </nav>

  <div id="slope-groups" style="min-height:800px;" class="o-grid-row">
    {% for group in groups %}
      <div class="figure constituency-group constituency-group--slope" data-o-grid-colspan="12">
        <h2 id="{{ group.slug }}" class="article-body__subhead figure__title">{{ group.headline }}</h2>

        <div class="figure__body">
          <div class="o-grid-row">

            <div class="constituency-group__summary-table" data-o-grid-colspan="12 S4 M3 L2 Loffset1">
              {% set table_data = group.partychanges %}
              {% include "./result-summary-table.html" %}
            </div>

            <div data-o-grid-colspan="12 S8 M9 L9" class="constituency-group__details">
              <p>{{ group.description }}</p>
            </div>

          </div>

          <div class="o-grid-row">

            <div class="constituency-group__locator-map" data-o-grid-colspan="hide S4 M3 L2 Loffset1">
              <div class="constituency-group__locator-map-ratio" data-group="{{loop.index0}}"></div>
            </div>

            <div data-o-grid-colspan="12 S8 M9 L9">

              <div class="o-grid-row constituency-group__slopes" >
                {% for constituency in group.constituencies | sortBy('name') %}
                <div class="constituency-group__slope" data-o-grid-colspan="4 M3 L1 XL1">
                  <div class="constituency-group__slope-graphic" data-constituency="{{constituency.id}}" data-order="{{loop.index0}}"></div>
                  <div class="constituency-group__constituency-name">
                  {% if constituency.article %}
                    <a href="{{constituency.article}}">{{constituency.name}}</a>
                  {% else %}
                    {{constituency.name}}
                  {% endif %}
                  </div>
                </div>
                {% endfor %}
              </div>

            </div>

          </div>

        </div>
      </div>
    {% endfor %}
  </div>

{% endblock %}

{% block scripts %}
<script>
{% autoescape false %}
var battlegrounds = {{ groups | json }};
var coalitions = {{ coalitions | json }};
{% endautoescape %}
if (cutsTheMustard) {
  addScript('{{ asset("js/group-forecast-slopes.js") }}', false, false);
}
</script>
{% endblock %}
